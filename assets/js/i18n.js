(function(){
  const translations = {
    en: {
      'profile.title': '15+ Senior QA Automation Engineer | Playwright | Cypress | WebDriverIO | Salesforce QA | AccelQ | Selenium | AWS | AI Driven',
      'nav.bio': 'Bio',
      'nav.certifications': 'Certifications',
      'nav.workhistory': 'Work History',
      'section.summaryTitle': 'Professional Summary',
      'section.summaryText': `<p>With 15 years of experience in Software Quality and Project Management, I have held diverse roles including Senior QA Automation Engineer, Senior Software Quality Engineer, QA Lead, QA Automation Engineer, QA Performance Tester and Security Specialist, QA Functional Tester, QA Architect, and Infrastructure Manager.</p><p>I am trilingual, with intermediate proficiency in English and native fluency in Portuguese and Spanish. Holding a degree in Computer Engineering, I am IBM-certified in RUPv7.0, AppScan Security, and RPT. My technical expertise spans a wide range of areas and tools, including:</p><ul class="feature-list"><li>Environment virtualization and e-commerce management</li><li>Security testing, including penetration testing with KALI</li><li>Performance testing using JMeter, RPT, and K6</li><li>Automation frameworks such as Playwright (TypeScript), Cypress (JavaScript), WebdriverIO (JavaScript/TypeScript), Selenium WebDriver (Java, Kotlin, JavaScript/TypeScript, Python), Node.js, Appium (Java, JavaScript), SilkTest, and UFT (VB.Net)</li><li>Backend/legacy testing with Ruby, IBM AS/400 (VBScript and Java)</li><li>API and Web Services testing including SOAP, XML-RPC, REST, gRPC, using tools like Axios and Postman-Newman</li><li>Specialized testing approaches such as contract testing (PACT), mutation testing (Stryker Mutator), and unit testing (JUnit, TestNG, Mocha/Chai)</li><li>Cloud and infrastructure experience with AWS Secrets Manager, S3, CloudWatch, Device Farm, ECS/EC2, ETL design, and Salesforce QA</li><li>Modern QA practices including AI-Driven testing, Event Storming, Shift-Left testing, visual testing, and chaos engineering (with AWS FIS)</li></ul><p>In addition to technical skills, I have experience in QA recruitment, mentoring, and team leadership, with a strong focus on Behavior-Driven Development (BDD) and mapping examples, characteristics, and user stories.</p><p>I have worked professionally across multiple countries, including Brazil, Panama, Peru, Colombia, Mexico (remotely), and the United States (remotely).</p>`,
      'section.educationTitle': 'Education',
      'edu.specialized': "Specialized Studies",
      'edu.bachelors': "Bachelor's Degree",
      'edu.certs': 'Certifications or Courses',
      'edu.cs': 'International Graduate Diploma in Project Management',
      'edu.it': 'Bachelor of Computer Engineering',
      'edu.university': 'Paulista University (UNIP), São Paulo, Brazil',
      'edu.posuniversity': 'ESAN Graduate School of Business, Lima, Peru',
      'edu.online': 'Online Platforms',
      'edu.skills': 'Various Tech Skills'
    },
    es: {
      'profile.title': '15+ Senior QA Automation Engineer | Playwright | Cypress | WebDriverIO | Salesforce QA | AccelQ | Selenium | AWS | AI Driven',
      'nav.bio': 'Bio',
      'nav.certifications': 'Certificaciones',
      'nav.workhistory': 'Experiencia',
      'section.summaryTitle': 'Resumen Profesional',
      'section.summaryText': `<p>Con 15 años de experiencia en Calidad de Software y Gestión de Proyectos, he desempeñado roles como Senior QA Automation Engineer, Senior Software Quality Engineer, QA Lead, QA Automation Engineer, QA Performance Tester y Security Specialist, QA Functional Tester, QA Architect e Infrastructure Manager.</p><p>Soy trilingüe, con dominio nativo de español y portugués y nivel intermedio de inglés. Soy Ingeniero en Computación y cuento con certificaciones IBM en RUP v7.0, AppScan Security y RPT. Mi experiencia técnica cubre diversas áreas y herramientas, entre ellas:</p><ul class="feature-list"><li>Virtualización de entornos y gestión de e‑commerce</li><li>Pruebas de seguridad, incluyendo pentesting con KALI</li><li>Pruebas de desempeño con JMeter, RPT y K6</li><li>Automatización con Playwright (TypeScript), Cypress (JavaScript), WebdriverIO (JS/TS), Selenium WebDriver (Java, Kotlin, JS/TS, Python), Node.js, Appium (Java, JS), SilkTest y UFT (VB.Net)</li><li>Pruebas de backend/legado con Ruby e IBM AS/400 (VBScript y Java)</li><li>Pruebas de APIs y Web Services (SOAP, XML‑RPC, REST, gRPC) con herramientas como Axios y Postman‑Newman</li><li>Enfoques especializados como contract testing (PACT), mutation testing (Stryker Mutator) y unit testing (JUnit, TestNG, Mocha/Chai)</li><li>Experiencia en nube e infraestructura con AWS Secrets Manager, S3, CloudWatch, Device Farm, ECS/EC2, diseño ETL y QA para Salesforce</li><li>Prácticas QA modernas como pruebas asistidas por IA, Event Storming, Shift‑Left, pruebas visuales y chaos engineering (AWS FIS)</li></ul><p>Además de lo técnico, tengo experiencia en reclutamiento de QA, mentoría y liderazgo de equipos, con fuerte enfoque en BDD y mapeo de ejemplos, características e historias de usuario.</p><p>He trabajado profesionalmente en Brasil, Panamá, Perú, Colombia, México (remoto) y Estados Unidos (remoto).</p>`,
      'section.educationTitle': 'Educación',
      'edu.specialized': 'Programa Ejecutivo Especializado',
      'edu.bachelors': 'Título Profesional',
      'edu.certs': 'Certificaciones o Cursos',
      'edu.cs': 'Diplomado Internacional en Gerencia de Proyectos',
      'edu.it': 'Ingeniería de Computación',
      'edu.university': 'Universidad Paulista, São Paulo, Brasil',
      'edu.posuniversity': 'ESAN Graduate School of Business, Lima, Perú',
      'edu.online': 'Plataformas en Línea',
      'edu.skills': 'Habilidades Técnicas Variadas'
    },
    pt: {
      'profile.title': '15+ Senior QA Automation Engineer | Playwright | Cypress | WebDriverIO | Salesforce QA | AccelQ | Selenium | AWS | AI Driven',
      'nav.bio': 'Bio',
      'nav.certifications': 'Treinamentos',
      'nav.workhistory': 'Experiência',
      'section.summaryTitle': 'Resumo Profissional',
      'section.summaryText': `<p>Com 15 anos de experiência em Qualidade de Software e Gestão de Projetos, atuei em funções como Senior QA Automation Engineer, Senior Software Quality Engineer, QA Lead, QA Automation Engineer, QA Performance Tester e Security Specialist, QA Functional Tester, QA Architect e Infrastructure Manager.</p><p>Sou trilíngue, com fluência nativa em português e espanhol e nível intermediário de inglês. Sou formado em Engenharia de Computação e certificado pela IBM em RUP v7.0, AppScan Security e RPT. Minha experiência técnica abrange várias áreas e ferramentas, incluindo:</p><ul class=\"feature-list\"><li>Virtualização de ambientes e gestão de e‑commerce</li><li>Testes de segurança, incluindo pentest com KALI</li><li>Testes de performance usando JMeter, RPT e K6</li><li>Automação com Playwright (TypeScript), Cypress (JavaScript), WebdriverIO (JS/TS), Selenium WebDriver (Java, Kotlin, JS/TS, Python), Node.js, Appium (Java, JS), SilkTest e UFT (VB.Net)</li><li>Testes de backend/legado com Ruby e IBM AS/400 (VBScript e Java)</li><li>Testes de API e Web Services (SOAP, XML‑RPC, REST, gRPC) com ferramentas como Axios e Postman‑Newman</li><li>Abordagens especializadas como contract testing (PACT), mutation testing (Stryker Mutator) e unit testing (JUnit, TestNG, Mocha/Chai)</li><li>Experiência em nuvem e infraestrutura com AWS Secrets Manager, S3, CloudWatch, Device Farm, ECS/EC2, desenho de ETL e QA para Salesforce</li><li>Práticas modernas de QA, incluindo testes orientados por IA, Event Storming, Shift‑Left, testes visuais e chaos engineering (AWS FIS)</li></ul><p>Além da parte técnica, tenho experiência em recrutamento de QA, mentoria e liderança de equipes, com forte foco em BDD e mapeamento de exemplos, características e histórias de usuário.</p><p>Atuei profissionalmente no Brasil, Panamá, Peru, Colômbia, México (remoto) e Estados Unidos (remoto).</p>`,
      'section.educationTitle': 'Educação',
      'edu.specialized': 'Programa Executivo Especializado',
      'edu.bachelors': 'Bacharelado',
      'edu.certs': 'Treinamentos ou Cursos',
      'edu.cs': 'Diploma Internacional em Gestão de Projetos',
      'edu.it': 'Engenharia da Computação',
      'edu.university': 'Universidade Paulista (UNIP), São Paulo, Brasil',
      'edu.posuniversity': 'ESAN Graduate School of Business, Lima, Perú',
      'edu.online': 'Plataformas Online',
      'edu.skills': 'Habilidades Técnicas Diversas'
    }
  };

  function applyTranslations(lang) {
    const dict = translations[lang] || translations.en;
    document.documentElement.setAttribute('lang', lang);
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      const val = dict[key];
      if (val !== undefined) {
        // Permitir HTML en algunos textos largos
        if (key === 'section.summaryText') {
          el.innerHTML = val;
        } else {
          el.textContent = val;
        }
      }
    });
    document.querySelectorAll('.lang-btn').forEach(btn => {
      const active = btn.dataset.lang.toLowerCase() === lang;
      btn.classList.toggle('active', active);
      btn.setAttribute('aria-pressed', active ? 'true' : 'false');
    });
  }

  const stored = localStorage.getItem('lang');
  const browser = (navigator.language || 'en').slice(0,2).toLowerCase();
  const initial = stored || (['es','en','pt'].includes(browser) ? browser : 'en');
  applyTranslations(initial);

  document.addEventListener('click', (ev) => {
    const btn = ev.target.closest('.lang-btn');
    if (!btn) return;
    const lang = btn.dataset.lang.toLowerCase();
    localStorage.setItem('lang', lang);
    applyTranslations(lang);
  });

  // Theme toggle (dark / light)
  const themeStored = localStorage.getItem('theme');
  if (themeStored === 'dark') {
    document.body.classList.add('dark');
  }

  // Función para actualizar el ícono del tema
  function updateThemeIcon() {
    const themeIcon = document.querySelector('.theme-toggle i');
    if (themeIcon) {
      const isDark = document.body.classList.contains('dark');
      themeIcon.classList.remove('fa-moon', 'fa-sun');
      themeIcon.classList.add(isDark ? 'fa-sun' : 'fa-moon');
    }
  }

  // Actualizar ícono al cargar la página (con pequeño delay para Firefox)
  setTimeout(updateThemeIcon, 0);

  document.addEventListener('click', (ev) => {
    const tbtn = ev.target.closest('.theme-toggle');
    if (!tbtn) return;
    const isDark = document.body.classList.toggle('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    // Actualizar ícono
    updateThemeIcon();
  });
})();
